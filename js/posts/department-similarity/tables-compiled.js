'use strict';d3.queue().defer(d3.json,'/datasets/department-similarity/similar-subjects.json').await(function(a,b){b.forEach(function(c){c.least_similar.reverse()}),renderSubjectTwinTables(b)});function renderSubjectTwinTables(a){var b=d3.set(a,function(g){return g.name}).values(),c='Astronomy';d3.select('#pick-subject').on('change',function(){return pickSubject(a)}).selectAll('option').data(b).enter().append('option').property('selected',function(g){return g==c}).text(function(g){return g}).attr('value',function(g,h){return h}),initTable('#most-similar-table'),initTable('#least-similar-table');var f=a.filter(function(g){return g.name==c});populateTable('#most-similar-table',f,'most_similar'),populateTable('#least-similar-table',f,'least_similar')}function getPickedData(a,b){var c=d3.select(a).property('value'),f=b.filter(function(g,h){return h==parseInt(c)});return f}function pickSubject(a){var b=getPickedData('#pick-subject',a);populateTable('#most-similar-table',b,'most_similar'),populateTable('#least-similar-table',b,'least_similar')}function initTable(a){var b=d3.select(a).append('thead'),c=d3.select(a).append('tbody'),f=b.append('tr');f.append('th').text('Subject'),f.append('th').text('Similarity')}function populateTable(a,b,c){var f=b[0][c];f.forEach(function(m){m.score=d3.format('.2f')(+m.score)});var g=d3.select(a).select('tbody'),h=g.selectAll('tr').data(f),j=h.enter().append('tr'),k=j.selectAll('td').data(function(m){return[m.name,m.score]}).enter().append('td').text(function(m){return m}),l=h.selectAll('td').data(function(m){return[m.name,m.score]}).text(function(m){return m});l.enter().append('td').text(function(m){return m}),h.exit().remove(),l.exit().remove()}